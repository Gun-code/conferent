import{_ as D,U as R,a as C}from"./index-DLxo1fU2.js";import{B as y}from"./BaseButton-DyjRtvra.js";import{f as p}from"./date-zoLOQ5-X.js";import{j as v,w as d,r as h,o as i,b as s,c as u,a as f,f as l,d as g,u as k,v as T,t as o,F,k as L,n as x,g as E}from"./vendor-CfKmPEc8.js";import"./utils-Dq7h7Pqt.js";const B={name:"ReservationList",components:{UserLayout:R,BaseButton:y},data(){return{reservations:[],loading:!1,error:null,filters:{status:"",date:""}}},computed:{filteredReservations(){let e=[...this.reservations];return this.filters.status&&(e=e.filter(t=>t.status===this.filters.status)),this.filters.date&&(e=e.filter(t=>t.startTime.startsWith(this.filters.date))),e.sort((t,c)=>new Date(c.startTime)-new Date(t.startTime))}},mounted(){this.loadReservations()},methods:{async loadReservations(){this.loading=!0,this.error=null;try{const e=await C.getAllRents();this.reservations=e.data}catch(e){this.error="예약 목록을 불러오는데 실패했습니다.",console.error("Failed to load reservations:",e)}finally{this.loading=!1}},handleFilterChange(){},formatDateTime(e){return p(e,"datetime")},formatTime(e){return p(e,"time")},getStatusClass(e){return`reservation-card__status ${{PENDING:"status-pending",CONFIRMED:"status-confirmed",CANCELLED:"status-cancelled",COMPLETED:"status-completed"}[e]||""}`},getStatusText(e){return{PENDING:"대기중",CONFIRMED:"확정",CANCELLED:"취소",COMPLETED:"완료"}[e]||e},canEdit(e){return e.status==="PENDING"||e.status==="CONFIRMED"},canCancel(e){return e.status==="PENDING"||e.status==="CONFIRMED"},handleCreateReservation(){this.$router.push("/reservations/create")},handleViewReservation(e){this.$router.push(`/reservations/${e.id}`)},handleEditReservation(e){this.$router.push(`/reservations/${e.id}/edit`)},async handleCancelReservation(e){if(confirm("정말로 이 예약을 취소하시겠습니까?"))try{await C.cancelRent(e.id),this.loadReservations()}catch(t){alert("예약 취소에 실패했습니다."),console.error("Failed to cancel reservation:",t)}}}},I={class:"reservation-list"},M={class:"reservation-list__header"},w={class:"reservation-list__filters"},O={class:"reservation-list__filter-group"},P={class:"reservation-list__filter-group"},V={key:0,class:"reservation-list__loading"},S={key:1,class:"reservation-list__error"},U={key:2,class:"reservation-list__empty"},b={key:3,class:"reservation-list__grid"},A={class:"reservation-card__header"},G={class:"reservation-card__title"},z={class:"reservation-card__content"},j={class:"reservation-card__info"},W={class:"reservation-card__room"},q={class:"reservation-card__time"},H={class:"reservation-card__creator"},J={class:"reservation-card__actions"};function K(e,t,c,Q,n,a){const _=h("BaseButton"),N=h("UserLayout");return i(),v(N,null,{default:d(()=>[s("div",I,[s("div",M,[t[5]||(t[5]=s("h1",{class:"reservation-list__title"},"예약 목록",-1)),f(_,{variant:"primary",onClick:a.handleCreateReservation},{default:d(()=>t[4]||(t[4]=[l(" 예약하기 ")])),_:1,__:[4]},8,["onClick"])]),s("div",w,[s("div",O,[t[7]||(t[7]=s("label",{for:"status-filter",class:"reservation-list__filter-label"},"상태",-1)),g(s("select",{id:"status-filter","onUpdate:modelValue":t[0]||(t[0]=r=>n.filters.status=r),class:"reservation-list__filter-select",onChange:t[1]||(t[1]=(...r)=>a.handleFilterChange&&a.handleFilterChange(...r))},t[6]||(t[6]=[s("option",{value:""},"전체",-1),s("option",{value:"PENDING"},"대기중",-1),s("option",{value:"CONFIRMED"},"확정",-1),s("option",{value:"CANCELLED"},"취소",-1),s("option",{value:"COMPLETED"},"완료",-1)]),544),[[k,n.filters.status]])]),s("div",P,[t[8]||(t[8]=s("label",{for:"date-filter",class:"reservation-list__filter-label"},"날짜",-1)),g(s("input",{id:"date-filter","onUpdate:modelValue":t[2]||(t[2]=r=>n.filters.date=r),type:"date",class:"reservation-list__filter-input",onChange:t[3]||(t[3]=(...r)=>a.handleFilterChange&&a.handleFilterChange(...r))},null,544),[[T,n.filters.date]])])]),n.loading?(i(),u("div",V,t[9]||(t[9]=[s("p",null,"예약 목록을 불러오는 중...",-1)]))):n.error?(i(),u("div",S,[s("p",null,o(n.error),1),f(_,{variant:"primary",onClick:a.loadReservations},{default:d(()=>t[10]||(t[10]=[l(" 다시 시도 ")])),_:1,__:[10]},8,["onClick"])])):a.filteredReservations.length===0?(i(),u("div",U,t[11]||(t[11]=[s("p",null,"조건에 맞는 예약이 없습니다.",-1)]))):(i(),u("div",b,[(i(!0),u(F,null,L(a.filteredReservations,r=>(i(),u("div",{key:r.id,class:"reservation-card"},[s("div",A,[s("h3",G,o(r.purpose),1),s("span",{class:x(a.getStatusClass(r.status))},o(a.getStatusText(r.status)),3)]),s("div",z,[s("div",j,[s("p",W,[t[12]||(t[12]=s("strong",null,"회의실:",-1)),l(" "+o(r.roomName),1)]),s("p",q,[t[13]||(t[13]=s("strong",null,"시간:",-1)),l(" "+o(a.formatDateTime(r.startTime))+" - "+o(a.formatTime(r.endTime)),1)]),s("p",H,[t[14]||(t[14]=s("strong",null,"예약자:",-1)),l(" "+o(r.creatorName),1)])])]),s("div",J,[f(_,{variant:"primary",size:"small",onClick:m=>a.handleViewReservation(r)},{default:d(()=>t[15]||(t[15]=[l(" 상세보기 ")])),_:2,__:[15]},1032,["onClick"]),a.canEdit(r)?(i(),v(_,{key:0,variant:"secondary",size:"small",onClick:m=>a.handleEditReservation(r)},{default:d(()=>t[16]||(t[16]=[l(" 수정 ")])),_:2,__:[16]},1032,["onClick"])):E("",!0),a.canCancel(r)?(i(),v(_,{key:1,variant:"danger",size:"small",onClick:m=>a.handleCancelReservation(r)},{default:d(()=>t[17]||(t[17]=[l(" 취소 ")])),_:2,__:[17]},1032,["onClick"])):E("",!0)])]))),128))]))])]),_:1})}const et=D(B,[["render",K],["__scopeId","data-v-462143c7"]]);export{et as default};
//# sourceMappingURL=index-DiG0S0l0.js.map
