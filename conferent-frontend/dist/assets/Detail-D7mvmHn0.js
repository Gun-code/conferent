import{_ as k,U as D,a as u}from"./index-DLxo1fU2.js";import{B as E}from"./BaseButton-DyjRtvra.js";import{f as h}from"./date-zoLOQ5-X.js";import{j as p,w as d,r as f,o as i,b as e,c as n,g as l,a as v,t as r,f as c,n as N,F as b,k as g}from"./vendor-CfKmPEc8.js";import"./utils-Dq7h7Pqt.js";const I={name:"ReservationDetail",components:{UserLayout:D,BaseButton:E},data(){return{reservation:null,reservationHistory:[],loading:!1,error:null}},computed:{reservationId(){return this.$route.params.id},canEdit(){return this.reservation?this.reservation.status==="PENDING"||this.reservation.status==="CONFIRMED":!1},canCancel(){return this.reservation?this.reservation.status==="PENDING"||this.reservation.status==="CONFIRMED":!1}},mounted(){this.loadReservation(),this.loadReservationHistory()},methods:{async loadReservation(){this.loading=!0,this.error=null;try{const o=await u.getRent(this.reservationId);this.reservation=o.data}catch(o){this.error="예약 정보를 불러오는데 실패했습니다.",console.error("Failed to load reservation:",o)}finally{this.loading=!1}},async loadReservationHistory(){try{const o=await u.getRentHistory(this.reservationId);this.reservationHistory=o.data}catch(o){console.error("Failed to load reservation history:",o)}},formatDate(o){return h(o,"date")},formatTime(o){return h(o,"time")},formatDateTime(o){return h(o,"datetime")},getStatusClass(o){return{PENDING:"status-pending",CONFIRMED:"status-confirmed",CANCELLED:"status-cancelled",COMPLETED:"status-completed"}[o]||""},getStatusText(o){return{PENDING:"대기중",CONFIRMED:"확정",CANCELLED:"취소",COMPLETED:"완료"}[o]||o},handleEdit(){this.$router.push(`/reservations/${this.reservationId}/edit`)},async handleCancel(){if(confirm("정말로 이 예약을 취소하시겠습니까?"))try{await u.cancelRent(this.reservationId),this.loadReservation()}catch(o){alert("예약 취소에 실패했습니다."),console.error("Failed to cancel reservation:",o)}},viewRoom(){this.$router.push(`/rooms/${this.reservation.roomId}`)}}},R={class:"reservation-detail"},T={key:0,class:"reservation-detail__loading"},L={key:1,class:"reservation-detail__error"},B={key:2,class:"reservation-detail__content"},x={class:"reservation-detail__header"},F={class:"reservation-detail__breadcrumb"},w={class:"breadcrumb-current"},H={class:"reservation-detail__actions"},M={class:"reservation-detail__info"},O={class:"reservation-detail__main"},P={class:"reservation-detail__title"},A={class:"reservation-detail__status"},S={class:"reservation-detail__meta"},G={class:"meta-item"},U={class:"meta-value"},V={class:"meta-item"},z={class:"meta-value"},j={class:"meta-item"},q={class:"meta-value"},J={class:"meta-item"},K={class:"meta-value"},Q={key:0,class:"meta-item"},W={class:"meta-value"},X={class:"meta-item"},Y={class:"meta-value"},Z={class:"meta-item"},$={class:"meta-value"},ee={key:0,class:"reservation-detail__description"},se={class:"description-content"},te={class:"reservation-detail__sidebar"},oe={class:"room-card"},re={class:"room-card__content"},ae={class:"room-info"},ie={class:"room-name"},ne={class:"room-location"},le={class:"room-capacity"},de={key:0,class:"room-description"},ce={key:0,class:"history-card"},_e={class:"history-list"},me={class:"history-action"},ve={class:"history-time"},ue={key:0,class:"history-note"};function he(o,s,pe,fe,t,a){const m=f("BaseButton"),y=f("router-link"),C=f("UserLayout");return i(),p(C,null,{default:d(()=>[e("div",R,[t.loading?(i(),n("div",T,s[0]||(s[0]=[e("p",null,"예약 정보를 불러오는 중...",-1)]))):t.error?(i(),n("div",L,[e("p",null,r(t.error),1),v(m,{variant:"primary",onClick:a.loadReservation},{default:d(()=>s[1]||(s[1]=[c(" 다시 시도 ")])),_:1,__:[1]},8,["onClick"])])):t.reservation?(i(),n("div",B,[e("div",x,[e("div",F,[v(y,{to:"/reservations",class:"breadcrumb-link"},{default:d(()=>s[2]||(s[2]=[c("내 예약")])),_:1,__:[2]}),s[3]||(s[3]=e("span",{class:"breadcrumb-separator"},">",-1)),e("span",w,r(t.reservation.purpose),1)]),e("div",H,[a.canEdit?(i(),p(m,{key:0,variant:"secondary",onClick:a.handleEdit},{default:d(()=>s[4]||(s[4]=[c(" 수정 ")])),_:1,__:[4]},8,["onClick"])):l("",!0),a.canCancel?(i(),p(m,{key:1,variant:"danger",onClick:a.handleCancel},{default:d(()=>s[5]||(s[5]=[c(" 취소 ")])),_:1,__:[5]},8,["onClick"])):l("",!0)])]),e("div",M,[e("div",O,[e("h1",P,r(t.reservation.purpose),1),e("div",A,[e("span",{class:N(a.getStatusClass(t.reservation.status))},r(a.getStatusText(t.reservation.status)),3)]),e("div",S,[e("div",G,[s[6]||(s[6]=e("span",{class:"meta-label"},"📅 날짜",-1)),e("span",U,r(a.formatDate(t.reservation.startTime)),1)]),e("div",V,[s[7]||(s[7]=e("span",{class:"meta-label"},"⏰ 시간",-1)),e("span",z,r(a.formatTime(t.reservation.startTime))+" - "+r(a.formatTime(t.reservation.endTime)),1)]),e("div",j,[s[8]||(s[8]=e("span",{class:"meta-label"},"🏢 회의실",-1)),e("span",q,[v(y,{to:`/rooms/${t.reservation.roomId}`,class:"room-link"},{default:d(()=>[c(r(t.reservation.roomName),1)]),_:1},8,["to"])])]),e("div",J,[s[9]||(s[9]=e("span",{class:"meta-label"},"📍 위치",-1)),e("span",K,r(t.reservation.roomLocation),1)]),t.reservation.attendees?(i(),n("div",Q,[s[10]||(s[10]=e("span",{class:"meta-label"},"👥 참석 인원",-1)),e("span",W,r(t.reservation.attendees)+"명",1)])):l("",!0),e("div",X,[s[11]||(s[11]=e("span",{class:"meta-label"},"👤 예약자",-1)),e("span",Y,r(t.reservation.creatorName),1)]),e("div",Z,[s[12]||(s[12]=e("span",{class:"meta-label"},"📅 예약일",-1)),e("span",$,r(a.formatDateTime(t.reservation.createdAt)),1)])]),t.reservation.description?(i(),n("div",ee,[s[13]||(s[13]=e("h3",{class:"description-title"},"상세 내용",-1)),e("p",se,r(t.reservation.description),1)])):l("",!0)]),e("div",te,[e("div",oe,[s[15]||(s[15]=e("h3",{class:"room-card__title"},"회의실 정보",-1)),e("div",re,[e("div",ae,[e("h4",ie,r(t.reservation.roomName),1),e("p",ne,"📍 "+r(t.reservation.roomLocation),1),e("p",le,"👥 최대 "+r(t.reservation.roomCapacity)+"명",1),t.reservation.roomDescription?(i(),n("p",de,r(t.reservation.roomDescription),1)):l("",!0)]),v(m,{variant:"outline",size:"small",onClick:a.viewRoom},{default:d(()=>s[14]||(s[14]=[c(" 회의실 보기 ")])),_:1,__:[14]},8,["onClick"])])]),t.reservationHistory.length>0?(i(),n("div",ce,[s[16]||(s[16]=e("h3",{class:"history-card__title"},"변경 이력",-1)),e("div",_e,[(i(!0),n(b,null,g(t.reservationHistory,_=>(i(),n("div",{key:_.id,class:"history-item"},[e("div",me,r(_.action),1),e("div",ve,r(a.formatDateTime(_.createdAt)),1),_.note?(i(),n("div",ue,r(_.note),1)):l("",!0)]))),128))])])):l("",!0)])])])):l("",!0)])]),_:1})}const Ne=k(I,[["render",he],["__scopeId","data-v-f71339b4"]]);export{Ne as default};
//# sourceMappingURL=Detail-D7mvmHn0.js.map
