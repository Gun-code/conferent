import{b as a,_ as C,U as y}from"./index-DLxo1fU2.js";import{B as k}from"./BaseButton-DyjRtvra.js";import{f as x}from"./date-zoLOQ5-X.js";import{j as B,w as u,r as h,o as i,b as t,c as n,a as f,f as m,d as g,u as w,v as D,t as d,F,k as E,n as I,g as L}from"./vendor-CfKmPEc8.js";import"./utils-Dq7h7Pqt.js";const U={getAllUsers:()=>a.get("/api/users"),getUserById:s=>a.get(`/api/users/${s}`),getUserByEmail:s=>a.get(`/api/users/email/${s}`),createUser:s=>a.post("/api/users",s),updateUser:(s,e)=>a.put(`/api/users/${s}`,e),deleteUser:s=>a.delete(`/api/users/${s}`),getUsersByRole:s=>a.get(`/api/users/role/${s}`),existsUser:s=>a.get(`/api/users/${s}/exists`),existsEmail:s=>a.get(`/api/users/email/${s}/exists`)},R={name:"UserList",components:{UserLayout:y,BaseButton:k},data(){return{users:[],loading:!1,error:null,filters:{role:"",search:""}}},computed:{filteredUsers(){let s=[...this.users];if(this.filters.role&&(s=s.filter(e=>e.role===this.filters.role)),this.filters.search){const e=this.filters.search.toLowerCase();s=s.filter(_=>_.name.toLowerCase().includes(e)||_.email.toLowerCase().includes(e))}return s.sort((e,_)=>e.name.localeCompare(_.name))}},mounted(){this.loadUsers()},methods:{async loadUsers(){this.loading=!0,this.error=null;try{const s=await U.getAllUsers();this.users=s.data}catch(s){this.error="사용자 목록을 불러오는데 실패했습니다.",console.error("Failed to load users:",s)}finally{this.loading=!1}},handleFilterChange(){},formatDate(s){return x(s,"date")},getInitials(s){return s?s.split(" ").map(e=>e[0]).join("").toUpperCase():"?"},getRoleClass(s){return`user-card__role ${{USER:"role-user",ADMIN:"role-admin"}[s]||""}`},getRoleText(s){return{USER:"일반 사용자",ADMIN:"관리자"}[s]||s},handleCreateUser(){this.$router.push("/users/create")},handleViewUser(s){this.$router.push(`/users/${s.id}`)},handleEditUser(s){this.$router.push(`/users/${s.id}/edit`)},async handleDeleteUser(s){if(confirm(`정말로 "${s.name}" 사용자를 삭제하시겠습니까?`))try{await U.deleteUser(s.id),this.users=this.users.filter(e=>e.id!==s.id)}catch(e){alert("사용자 삭제에 실패했습니다."),console.error("Failed to delete user:",e)}}}},V={class:"user-list"},A={class:"user-list__header"},N={class:"user-list__filters"},b={class:"user-list__filter-group"},M={class:"user-list__filter-group"},S={key:0,class:"user-list__loading"},z={key:1,class:"user-list__error"},T={key:2,class:"user-list__empty"},j={key:3,class:"user-list__grid"},q={class:"user-card__avatar"},G={class:"user-card__content"},H={class:"user-card__header"},J={class:"user-card__name"},K={class:"user-card__info"},O={class:"user-card__email"},P={key:0,class:"user-card__department"},Q={class:"user-card__joined"},W={class:"user-card__actions"};function X(s,e,_,Y,o,l){const c=h("BaseButton"),v=h("UserLayout");return i(),B(v,null,{default:u(()=>[t("div",V,[t("div",A,[e[5]||(e[5]=t("h1",{class:"user-list__title"},"사용자 목록",-1)),f(c,{variant:"primary",onClick:l.handleCreateUser},{default:u(()=>e[4]||(e[4]=[m(" 사용자 추가 ")])),_:1,__:[4]},8,["onClick"])]),t("div",N,[t("div",b,[e[7]||(e[7]=t("label",{for:"role-filter",class:"user-list__filter-label"},"역할",-1)),g(t("select",{id:"role-filter","onUpdate:modelValue":e[0]||(e[0]=r=>o.filters.role=r),class:"user-list__filter-select",onChange:e[1]||(e[1]=(...r)=>l.handleFilterChange&&l.handleFilterChange(...r))},e[6]||(e[6]=[t("option",{value:""},"전체",-1),t("option",{value:"USER"},"일반 사용자",-1),t("option",{value:"ADMIN"},"관리자",-1)]),544),[[w,o.filters.role]])]),t("div",M,[e[8]||(e[8]=t("label",{for:"search-filter",class:"user-list__filter-label"},"검색",-1)),g(t("input",{id:"search-filter","onUpdate:modelValue":e[2]||(e[2]=r=>o.filters.search=r),type:"text",class:"user-list__filter-input",placeholder:"이름 또는 이메일 검색",onInput:e[3]||(e[3]=(...r)=>l.handleFilterChange&&l.handleFilterChange(...r))},null,544),[[D,o.filters.search]])])]),o.loading?(i(),n("div",S,e[9]||(e[9]=[t("p",null,"사용자 목록을 불러오는 중...",-1)]))):o.error?(i(),n("div",z,[t("p",null,d(o.error),1),f(c,{variant:"primary",onClick:l.loadUsers},{default:u(()=>e[10]||(e[10]=[m(" 다시 시도 ")])),_:1,__:[10]},8,["onClick"])])):l.filteredUsers.length===0?(i(),n("div",T,e[11]||(e[11]=[t("p",null,"조건에 맞는 사용자가 없습니다.",-1)]))):(i(),n("div",j,[(i(!0),n(F,null,E(l.filteredUsers,r=>(i(),n("div",{key:r.id,class:"user-card"},[t("div",q,d(l.getInitials(r.name)),1),t("div",G,[t("div",H,[t("h3",J,d(r.name),1),t("span",{class:I(l.getRoleClass(r.role))},d(l.getRoleText(r.role)),3)]),t("div",K,[t("p",O,d(r.email),1),r.department?(i(),n("p",P,d(r.department),1)):L("",!0),t("p",Q," 가입일: "+d(l.formatDate(r.createdAt)),1)])]),t("div",W,[f(c,{variant:"primary",size:"small",onClick:p=>l.handleViewUser(r)},{default:u(()=>e[12]||(e[12]=[m(" 상세보기 ")])),_:2,__:[12]},1032,["onClick"]),f(c,{variant:"secondary",size:"small",onClick:p=>l.handleEditUser(r)},{default:u(()=>e[13]||(e[13]=[m(" 수정 ")])),_:2,__:[13]},1032,["onClick"]),f(c,{variant:"danger",size:"small",onClick:p=>l.handleDeleteUser(r)},{default:u(()=>e[14]||(e[14]=[m(" 삭제 ")])),_:2,__:[14]},1032,["onClick"])])]))),128))]))])]),_:1})}const re=C(R,[["render",X],["__scopeId","data-v-3d50566e"]]);export{re as default};
//# sourceMappingURL=index-D-wSvsMw.js.map
